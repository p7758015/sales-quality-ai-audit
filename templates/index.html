<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AI-аудит звонков отдела продаж</title>
    <style>
        body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; max-width: 960px; margin: 0 auto; padding: 24px; background: #f5f5f7; }
        h1 { font-size: 26px; margin-bottom: 8px; }
        h2 { font-size: 18px; margin-top: 24px; }
        p { line-height: 1.5; }
        .card { background: #ffffff; border-radius: 10px; padding: 20px 24px; box-shadow: 0 2px 8px rgba(15, 23, 42, 0.06); margin-bottom: 24px; }
        form { margin-top: 12px; }
        label { display: block; margin-top: 12px; font-weight: 600; font-size: 14px; }
        textarea { width: 100%; min-height: 130px; padding: 8px; font-family: inherit; font-size: 14px; border-radius: 6px; border: 1px solid #d4d4d8; }
        input[type="file"] { margin-top: 6px; font-size: 13px; }
        select { margin-top: 6px; padding: 6px 8px; border-radius: 6px; border: 1px solid #d4d4d8; font-size: 14px; }
        button { margin-top: 18px; padding: 9px 18px; cursor: pointer; border-radius: 6px; border: none; background: #2563eb; color: #ffffff; font-weight: 600; font-size: 14px; }
        button:hover { background: #1d4ed8; }
        .hint { font-size: 12px; color: #6b7280; margin-top: 4px; }
        .result { margin-top: 16px; padding-top: 12px; border-top: 1px solid #e4e4e7; }
        .score { font-size: 20px; font-weight: 700; margin-bottom: 8px; }
        pre { white-space: pre-wrap; font-family: inherit; font-size: 14px; }
        .badge { display: inline-block; padding: 2px 8px; border-radius: 999px; background: #e0f2fe; color: #0369a1; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; }
        .layout { display: flex; flex-direction: column; gap: 16px; }
        @media (min-width: 880px) {
            .layout { flex-direction: row; align-items: flex-start; }
            .layout-main { flex: 3; }
            .layout-side { flex: 2; }
        }
        ul { padding-left: 18px; font-size: 14px; }
    </style>
</head>
<body>

<div class="card">
    <span class="badge">Demo-проект</span>
    <h1>AI-аудит звонков отдела продаж</h1>
    <p>
        Сервис автоматически оценивает качество диалогов менеджеров:
        анализирует текст или запись звонка, выставляет балл от 0 до 100%
        и формирует понятный разбор с рекомендациями.
    </p>

    <div class="layout">
        <div class="layout-main">
            <form action="/web/analyze" method="post" enctype="multipart/form-data">
                <label for="dialog_text">Текст диалога</label>
                <textarea id="dialog_text" name="dialog_text" placeholder="Клиент: ...&#10;Менеджер: ..."></textarea>
                <div class="hint">Можно вставить скрипт из CRM или расшифровку звонка.</div>

                <label for="audio">Аудиозапись звонка</label>
                <input id="audio" name="audio" type="file" accept="audio/*">
                <div class="hint">Форматы: mp3, wav и другие популярные аудиоформаты.</div>

                <label for="content_mode">Режим анализа</label>
                <select id="content_mode" name="content_mode">
                    <option value="Manager +" selected>Manager + — акцент на работе менеджера</option>
                    <option value="Client +">Client + — акцент на реакции клиента</option>
                    <option value="Диалог">Диалог — общее качество разговора</option>
                </select>
                <div class="hint">Если указан и текст, и аудио, приоритет отдаётся аудио.</div>

                <button type="submit">Оценить качество звонка</button>
            </form>
        </div>

        <div class="layout-side">
            <h2>Как это работает</h2>
            <ul>
                <li>Транскрибирует аудио (Whisper) или берёт готовый текст.</li>
                <li>Анализирует структуру диалога, вопросы, обработку возражений.</li>
                <li>Возвращает балл и короткий отчёт, понятный руководителю отдела продаж.</li>
            </ul>
            <p class="hint">
                Проект собран на FastAPI + OpenAI и может быть интегрирован с CRM или системой телефонии
                через вебхуки и ссылки на записи звонков.
            </p>
        </div>
    </div>

    {% if result %}
    <div class="result">
        <div class="score">Оценка качества: {{ result.total_score }}%</div>
        <h3>Краткий разбор</h3>
        <pre>{{ result.summary }}</pre>

        {% if result.recommendations %}
            <h3>Рекомендации</h3>
            <pre>{{ result.recommendations }}</pre>
        {% endif %}
    </div>
    {% endif %}
</div>

</body>
</html>

